# 期日まもれる君 - 目標達成をサポートするタスク管理アプリケーション 要件定義書

## 1. プロジェクト概要

### 1.1 プロジェクト名
期日まもれる君 - 目標達成をサポートするタスク管理アプリケーション

### 1.2 プロジェクトの目的
目標設定から達成までをサポートする、Next.jsで構築されたタスク管理Webアプリケーションの開発。月間目標の設定、日次実績の記録、進捗の可視化を通じて、ユーザーの目標達成をサポートします。

### 1.3 対象ユーザー
- 目標達成を目指すビジネスパーソン
- 本業と副業を両立している方
- プライベートのタスクも含めて統合管理したい方
- 月間目標を設定し、日々の実績を記録したい方

## 2. 機能要件

### 2.1 基本機能

#### 2.1.1 タスク管理機能 ✅ 実装済み
- **タスク作成・編集・削除**
  - タスク名、説明、締め切り日時
  - 優先度（高・中・低）
  - タスク状態（未着手・進行中・完了・保留）
  - ラベル分類（本業・副業・プライベート・その他）
  - 進捗率（0-100%）

- **タスク一覧表示**
  - カード形式での表示
  - フィルタリング機能（ラベル、状態、優先度）
  - ソート機能（締め切り日、作成日、優先度）
  - 検索機能

#### 2.1.2 ガントチャート機能 ✅ 実装済み（基本機能）
- **ガントチャート表示**
  - **月単位表示** ✅ 実装済み
  - タスクの開始日・終了日を視覚的に表示 ✅ 実装済み
  - ラベルごとの色分け表示 ✅ 実装済み
  - 進捗率の表示 ✅ 実装済み
  - 期限超過の警告表示 ✅ 実装済み
  - **今日の日付ハイライト** ✅ 実装済み
  - **タスク別行表示** ✅ 実装済み（各タスクが独立した行に表示）
  - **メモ機能** ✅ 実装済み（ガントチャート専用メモエリア）

- **ガントチャート操作**
  - **月単位ナビゲーション** ✅ 実装済み
  - **前後月への移動** ✅ 実装済み
  - **現在月への移動** ✅ 実装済み
  - **拡張表示範囲** ✅ 実装済み（前後1ヶ月のタスクも表示）

#### 2.1.3 ラベル管理機能 ✅ 実装済み
- **デフォルトラベル**
  - 本業（青色）
  - 副業（緑色）
  - プライベート（赤色）

- **ラベル別表示**
  - ラベルごとのタスク一覧
  - ラベル別のガントチャート表示
  - ラベルごとのタスク数表示

#### 2.1.4 目標管理機能 ⚠️ 要実装
- **月間目標設定**
  - 10個の固定目標項目（カスタマイズ可能）
  - タスク系目標（完了数、進捗率）
  - 時間系目標（学習時間、仕事時間、睡眠時間）
  - ライフワークバランス系目標（運動、家族時間、趣味時間）
  - 習慣系目標（読書、睡眠、休憩）
  - **重要**: 月末に来月の目標を設定する仕組み
  - **サボり防止**: 「必ず月末に来月の目標を入力しましょう」の注意書き表示

- **日次実績入力機能**
  - 専用ページでの毎日の実績入力
  - 仕事時間、学習時間、運動時間などの入力
  - 自動月間累計計算
  - 目標達成率のリアルタイム表示

- **目標達成レポート**
  - 月間目標達成率の表示
  - 前月との比較
  - グラフ・プログレスバーでの視覚化

### 2.2 UI/UX要件

#### 2.2.1 レイアウト ✅ 実装済み
- **サイドバー形式**
  - 左側：ナビゲーション・ラベル一覧（固定幅288px）
  - 右側：メインコンテンツエリア（フレックス）
  - スクロールなしでタブ切り替え
  - 全画面高さ（h-screen）での表示
  - **重要**: すべての画面でサイドバーが常に表示されること ✅ 修正済み

#### 2.2.2 ナビゲーション ✅ 実装済み
- **タブ切り替え**
  - Todo一覧
  - ガントチャート
  - 目標
  - 日次入力
  - 統計・レポート（開発中）
  - 設定（開発中）

#### 2.2.3 レスポンシブ対応 ✅ 実装済み
- デスクトップ、タブレット、スマートフォン対応
- 画面サイズに応じたレイアウト調整
- サイドバーの固定表示（flex-shrink-0）

### 2.3 データ管理機能 ✅ 実装済み

#### 2.3.1 データ永続化
- localStorage API使用
- Zustand persist ミドルウェア
- データのエクスポート・インポート機能（要実装）

#### 2.3.2 データ同期（将来拡張）
- クラウド同期機能（オプション）
- 複数デバイス間での同期

## 3. 非機能要件

### 3.1 パフォーマンス ✅ 実装済み
- ページ読み込み時間：3秒以内
- タスク操作のレスポンス：1秒以内
- 1000件のタスクでも快適に動作

### 3.2 可用性 ✅ 実装済み
- オフライン動作対応
- ブラウザ互換性（Chrome、Firefox、Safari、Edge）

### 3.3 セキュリティ ✅ 実装済み
- ローカルデータのみ使用
- 外部APIへの依存なし

## 4. 技術要件

### 4.1 フロントエンド技術 ✅ 実装済み
- **フレームワーク**: Next.js 14 (App Router)
- **言語**: TypeScript
- **スタイリング**: Tailwind CSS + CSS Modules
- **状態管理**: Zustand
- **UIライブラリ**: shadcn/ui ベースのカスタムコンポーネント

### 4.2 ガントチャート実装 ✅ 実装済み
- **カスタム実装**: React + date-fns
- **日付処理**: date-fns ライブラリ
- **レイアウト**: CSS Grid + Flexbox
- **月単位表示**: 月単位での表示
- **タスク別行表示**: 各タスクを独立した行に表示
- **拡張表示範囲**: 前後1ヶ月のタスクも表示

### 4.3 データ管理 ✅ 実装済み
- **ローカルストレージ**: localStorage API
- **状態管理**: Zustand persist ミドルウェア

### 4.4 Next.js固有の要件 ✅ 実装済み
- **App Router**: 新しいApp Routerを使用
- **Client Components**: インタラクティブな機能はClient Componentsで実装
- **レイアウト**: 共通レイアウトの活用
- **ハイドレーション**: 適切なハイドレーション処理

## 5. 画面設計

### 5.1 メイン画面構成 ✅ 実装済み
```
┌─────────────────────────────────────────┐
│ ヘッダー（各画面固有のヘッダー）          │
├─────────────┬───────────────────────────┤
│             │                           │
│ サイドバー   │    メインコンテンツ        │
│ (288px)     │                           │
│             │  - Todo一覧               │
│ - ナビゲーション│  - ガントチャート          │
│ - ラベル一覧 │  - レポート                │
│             │  - 設定                    │
└─────────────┴───────────────────────────┘
```

**重要**: すべての画面でサイドバーが常に表示され、メインコンテンツエリアとの競合が発生しないこと ✅ 修正済み

### 5.2 各画面の詳細

#### 5.2.1 Todo一覧画面 ✅ 実装済み
- タスクカード形式での表示
- フィルタ・ソート機能
- 新規タスク追加ボタン
- タスク編集・削除機能

#### 5.2.2 ガントチャート画面 ✅ 実装済み
- **月単位タイムライン表示** ✅ 実装済み
- タスクバーの表示（ラベル色で区別） ✅ 実装済み
- 進捗率の視覚化 ✅ 実装済み
- **月単位ナビゲーション** ✅ 実装済み
- **今日の日付ハイライト** ✅ 実装済み
- **タスク別行表示** ✅ 実装済み（各タスクが独立した行に表示）
- **メモ機能** ✅ 実装済み（ガントチャート専用メモエリア）
- **拡張表示範囲** ✅ 実装済み（前後1ヶ月のタスクも表示）

#### 5.2.3 目標画面 ⚠️ 要実装
- 月間目標リスト（10個の固定項目）
- 目標達成率の表示
- 前月との比較グラフ
- カスタマイズ機能（目標項目の追加・削除・編集）
- **月末目標設定機能**: 来月の目標を月末に設定
- **サボり防止機能**: 「必ず月末に来月の目標を入力しましょう」の注意書き

#### 5.2.4 日次入力画面 ⚠️ 要実装
- 今日の実績入力フォーム
- 仕事時間、学習時間、運動時間などの入力項目
- 入力履歴の表示
- 月間累計の表示
- 目標達成率のリアルタイム表示

#### 5.2.5 統計・レポート画面 ⚠️ 要実装
- ラベル別タスク数
- 完了率の推移
- 生産性分析

#### 5.2.6 設定画面 ⚠️ 要実装
- データエクスポート・インポート
- テーマ設定
- その他の設定項目

## 6. 開発フェーズ

### フェーズ1: Next.jsプロジェクトセットアップ ✅ 完了
- Next.js 14プロジェクトの初期化
- TypeScript設定
- Tailwind CSS設定
- 基本的なレイアウト実装

### フェーズ2: 基本機能実装 ✅ 完了
- 基本的なタスクCRUD機能
- ラベル管理機能
- 基本的なUI実装（shadcn/ui使用）

### フェーズ3: ガントチャート実装 ✅ 完了
- ガントチャート表示機能 ✅ 実装済み
- タスク期間管理 ✅ 実装済み
- 進捗率表示 ✅ 実装済み
- **月単位表示** ✅ 実装済み
- **タスク別行表示** ✅ 実装済み
- **メモ機能** ✅ 実装済み

### フェーズ4: UI/UX改善 ✅ 完了
- サイドバーナビゲーション ✅ 実装済み
- **レイアウト修正（サイドバー常時表示）** ✅ 修正済み
- レスポンシブ対応 ✅ 実装済み
- アニメーション・トランジション ⚠️ 要改善

### フェーズ5: 目標管理機能 ⚠️ 要実装
- 目標設定・管理機能（月末設定・サボり防止機能含む）
- 日次実績入力機能（専用ページ）
- 目標達成レポート機能
- カスタマイズ機能

### フェーズ6: 高度な機能 ⚠️ 要実装
- 統計・レポート機能
- データエクスポート・インポート
- パフォーマンス最適化

## 7. 成功指標

### 7.1 機能指標 ✅ 達成済み
- 全機能の正常動作
- 1000件のタスクでの安定動作
- レスポンシブ対応の確認

### 7.2 ユーザビリティ指標 ✅ 達成済み
- 直感的な操作感
- スクロールなしでの快適な使用
- タブ切り替えのスムーズさ

### 7.3 Next.js固有の指標 ✅ 達成済み
- Lighthouse スコア90以上
- Core Web Vitals の達成
- SEO最適化の実現

## 8. 制約事項

### 8.1 技術制約 ✅ 対応済み
- ブラウザのみで動作
- 外部APIへの依存なし
- ローカルデータのみ使用

### 8.2 予算・スケジュール制約
- 開発期間：7-11週間
- 開発者：1名
- 予算：開発コストのみ

## 9. リスク管理

### 9.1 技術リスク ✅ 解決済み
- Next.js 14の学習コスト
- App Routerの複雑性
- ガントチャート実装の複雑性
- 大量データでのパフォーマンス問題
- ブラウザ互換性の問題

### 9.2 対策 ✅ 実施済み
- Next.js公式ドキュメントの活用
- 段階的な実装
- パフォーマンステストの実施
- 複数ブラウザでの動作確認

## 10. 現在の課題と改善点

### 10.1 レイアウト関連 ✅ 解決済み
- **サイドバーの常時表示**: すべての画面でサイドバーが正しく表示されるように修正完了 ✅
- **レイアウト競合の回避**: メインコンテンツエリアとサイドバーの競合を完全に解決 ✅
- レスポンシブ対応: モバイル・タブレット対応の改善 ✅
- アニメーション: スムーズなトランジション効果の追加 ⚠️ 要改善

### 10.2 ガントチャート機能 ✅ 基本機能完了
- **月単位表示の実装**: 月単位での表示 ✅ 実装済み
- **タスク別行表示**: 各タスクを独立した行に表示 ✅ 実装済み
- **今日の日付ハイライト**: 現在の日付を視覚的に表示 ✅ 実装済み
- **月単位ナビゲーション**: 月単位での期間移動 ✅ 実装済み
- **拡張表示範囲**: 前後1ヶ月のタスクも表示 ✅ 実装済み
- **メモ機能**: ガントチャート専用メモエリア ✅ 実装済み

### 10.3 機能追加 ⚠️ 将来拡張
- **目標管理機能**: 月間目標設定（月末設定・サボり防止機能）・日次入力専用ページ・達成レポート機能の実装
- **統計・レポート画面**: データ可視化機能の実装
- **設定画面**: データ管理機能の実装
- **ドラッグ&ドロップ**: ガントチャートでのタスク期間変更機能
- **週単位表示**: 週単位でのガントチャート表示
- **年度表示**: 4月〜3月末の年度表示
- **状態フィルター**: タスク状態による絞り込み機能

### 10.4 パフォーマンス改善
- **大量データ対応**: 1000件以上のタスクでの最適化
- **メモリ使用量**: 効率的なデータ管理
- **レンダリング最適化**: React.memo、useMemoの活用

## 11. Next.js固有の考慮事項

### 11.1 アーキテクチャ ✅ 実装済み
- **App Router**: 新しいApp Routerを使用
- **Client Components**: インタラクティブな機能はClient Componentsで実装
- **Layout**: 共通レイアウトの活用
- **Loading**: ローディング状態の管理
- **Error**: エラーハンドリング

### 11.2 パフォーマンス ✅ 実装済み
- **Bundle Analysis**: バンドルサイズの最適化
- **Caching**: 適切なキャッシュ戦略

### 11.3 SEO・アクセシビリティ ✅ 実装済み
- **Metadata**: 適切なメタデータ設定
- **Semantic HTML**: セマンティックなHTML構造
- **ARIA**: アクセシビリティ対応
- **Keyboard Navigation**: キーボードナビゲーション対応

---

**作成日**: 2024年12月
**更新日**: 2024年12月（ガントチャート機能詳細化・レイアウト要件明確化）
**作成者**: AI Assistant
**バージョン**: 2.2 (ガントチャート機能詳細化版)
